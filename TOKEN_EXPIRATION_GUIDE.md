# 토큰 만료 시간 설정 가이드

## 📋 개요

시스템은 두 가지 유형의 JWT 토큰을 사용합니다:
1. **면접관 토큰**: 면접 일정 선택 링크에 사용
2. **관리자 토큰**: 인사팀 로그인에 사용

## ⏰ 기본 만료 시간

### 면접관 토큰
- **기본값**: 90일 (`90d`)
- **이유**: 면접이 확정되기까지 시간이 걸릴 수 있음
- 면접관이 일정을 선택하고, 모든 면접관이 응답할 때까지 기다려야 함
- 공통 일정을 찾고 확정하는 과정에서 시간이 소요될 수 있음

### 관리자 토큰
- **기본값**: 7일 (`7d`)
- **이유**: 보안상 짧게 유지
- 관리자는 자주 로그인하므로 짧은 만료 시간이 적절

## 🔧 환경 변수로 설정

`backend/.env` 파일에 다음 변수를 추가하여 만료 시간을 변경할 수 있습니다:

```bash
# 면접관 토큰 만료 시간 (기본값: 90d)
INTERVIEWER_TOKEN_EXPIRES=90d

# 관리자 토큰 만료 시간 (기본값: 7d)
ADMIN_TOKEN_EXPIRES=7d
```

### 만료 시간 형식

JWT 라이브러리는 다음 형식을 지원합니다:
- `s` (초): `3600s` = 1시간
- `m` (분): `60m` = 1시간
- `h` (시간): `24h` = 1일
- `d` (일): `7d` = 7일
- 숫자만: `3600` = 3600초

### 예시

```bash
# 면접관 토큰을 180일로 설정
INTERVIEWER_TOKEN_EXPIRES=180d

# 면접관 토큰을 1년으로 설정
INTERVIEWER_TOKEN_EXPIRES=365d

# 관리자 토큰을 30일로 설정
ADMIN_TOKEN_EXPIRES=30d

# 면접관 토큰을 6개월로 설정 (대략 180일)
INTERVIEWER_TOKEN_EXPIRES=180d
```

## 🎯 권장 설정

### 개발 환경
```bash
INTERVIEWER_TOKEN_EXPIRES=180d  # 충분히 길게 설정
ADMIN_TOKEN_EXPIRES=30d         # 편의를 위해 길게 설정
```

### 프로덕션 환경
```bash
INTERVIEWER_TOKEN_EXPIRES=90d   # 기본값 (면접 확정까지 충분)
ADMIN_TOKEN_EXPIRES=7d          # 기본값 (보안상 짧게)
```

## ⚠️ 주의사항

### 토큰 만료 시
1. **면접관 토큰 만료**
   - 면접관이 링크를 클릭했을 때 "토큰이 만료되었습니다" 오류 발생
   - 해결: 새 토큰 발급 필요
   - 방법: 면접 상세 페이지에서 "링크 재발급" 기능 사용 (구현 예정)

2. **관리자 토큰 만료**
   - 로그인 페이지에서 다시 로그인 필요
   - 자동으로 새 토큰 발급

### 토큰 만료 시간 변경 시
- **기존 토큰에는 영향 없음**: 이미 발급된 토큰은 변경 전 만료 시간 유지
- **새로 발급되는 토큰만 영향**: 환경 변수 변경 후 새로 발급되는 토큰에만 적용
- **서버 재시작 필요**: 환경 변수 변경 후 서버 재시작 필요

## 🔄 토큰 갱신 방법

### 면접관 토큰 갱신
현재는 수동으로 새 토큰을 발급해야 합니다:
1. 면접 상세 페이지 접속
2. "링크 재발급" 버튼 클릭 (구현 예정)
3. 새 링크를 면접관에게 전달

### 관리자 토큰 갱신
- 로그인 페이지에서 다시 로그인하면 자동으로 새 토큰 발급

## 📊 만료 시간 결정 가이드

### 면접관 토큰 만료 시간 결정
다음 요소를 고려하세요:

1. **면접 확정까지 소요 시간**
   - 모든 면접관이 응답하는 데 걸리는 시간
   - 공통 일정을 찾는 데 걸리는 시간
   - 예: 평균 3-5일 소요 → 최소 7일 이상 권장

2. **면접 일정 확정 기간**
   - 면접일까지 최소 48시간 전 확정 필요
   - 예: 면접일이 2주 후 → 최소 2주 + 2일 = 16일 이상 권장

3. **안전 마진**
   - 예상 시간의 2-3배 정도 여유를 두는 것을 권장
   - 예: 평균 5일 소요 → 15일 이상 권장

**권장 설정**: `90d` (90일)
- 대부분의 경우 충분한 시간 제공
- 면접 확정까지 여유 있게 대기 가능
- 토큰 만료로 인한 불편 최소화

### 관리자 토큰 만료 시간 결정
- 보안상 짧게 유지하는 것을 권장
- 기본값 `7d` (7일) 권장
- 자주 로그인하는 경우 더 짧게 설정 가능

## 🧪 테스트

### 토큰 만료 시간 확인
1. 토큰 생성 후 JWT 디코딩
2. `exp` (expiration) 필드 확인
3. 현재 시간과 비교하여 만료 시간 확인

### 토큰 만료 테스트
1. 만료 시간을 짧게 설정 (예: `1m`)
2. 토큰 생성
3. 1분 후 토큰 사용 시도
4. "토큰이 만료되었습니다" 오류 확인

## 📝 요약

- **면접관 토큰**: 기본 90일, 환경 변수로 변경 가능
- **관리자 토큰**: 기본 7일, 환경 변수로 변경 가능
- **변경 방법**: `backend/.env` 파일에 `INTERVIEWER_TOKEN_EXPIRES`, `ADMIN_TOKEN_EXPIRES` 추가
- **적용**: 서버 재시작 후 새로 발급되는 토큰에만 적용
- **권장**: 면접관 토큰은 90일, 관리자 토큰은 7일 유지
